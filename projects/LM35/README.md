

Overview
--------------------------------------------
* Name: LCD16x02_I2C
* Description: Display the data from a LM35 temperature sensor and an 2^12 Analog input 
to an LCD 16X02 display HD44780 via the I2C bus and a PCF8574 Interface "backpack" board
using a PIC16F18446.
* Author: Gavin Lyons.
* Complier: xc8 v2.05 compiler
* PIC: PIC16F18446
* IDE:  MPLAB X v5.05
* Foundation services library: 0.1.31 (I2C)
* MCC version: 3.75
* Development board: Microchip Curiosity Board DM164137, PIC16F18446

Table of contents
---------------------------

  * [Overview](#overview)
  * [Features](#features)

Features
----------------------

This project displays an input from a potentiometer on line 1 of LCD and LM35 data
on line 2. The values are read on a interrupt generated by overflow of timer0 every 3.26 second.
A status LED on RA2 toggles on same Timer. So LED and LCD are refreshed at that interval.

1. RC0 = Analog data in from potentiometer
2. RC1 = LM35 Data in 
3. RA2 = Status LED.

**ANALOG DATA**

This PIC unlike most in its class/size has a 12-bit ADC giving a resolution (for Vcc of 5 volts ),
5/4096 = 0.0012207 per division. 

The 12-bit ADC (0 to 4096) value is read from a pot attached to PIC pin RC0.
It is then displayed on the display.
The ADC value also is converted to a voltage value.
(It assumes vdd  = 5V) which maps 0-4096 to 0-5V ranges.


**LM35**

The LM35 outputs a signal on pin Vout, The LM35 signal is read via an analog input(RC1) 10mV per degree. 
The ADC  0.0012207 per division. 

LM35 calculation:

1.    Vout=0.01/°C
2.    °C=Vout/0.01
3.    °C=(Vout *  100) where  Vout = ADC_value * (VCC/ADC resolution)
4.    °C = (ADC_value * (0.0012207)) * 100
5.    °C * 100 =(ADC_value * (0.0012207)) * 10000 
6.    °C  * 100 = 488 (Solved for an ADC value of 40) 4.88°C
7.    The RHS can then be parsed by code and displayed.

**HD44780-based character LCD**

The LCD is controlled via the 2-pin I2C bus.
HD44780 based character LCD displays use 14 wire connections: 8 data lines (D0-D7), 3 control lines (RS, E, R/W), and three power lines (Vdd, Vss, Vee). Some LCDs come with backlight features that help reading display data in low illumination conditions. They have two additional connections (LED+ and LED- or A and K).

In this example code, a 4-pin PCF8574 Interface "backpack" board is attached to LCD. It is controlled via the two pin I2C bus. Both pins must be held logic high by pull-up resistors.

1. RB4 = SDA
2. RB6 = SCLK 

The LCD code are in a separate library files called "lcd.h" and "lcd.c".
The Data is sent in 4-bit mode. The upper nibble holds the data and lower nibble of byte manipulates
the control bits of LCD(enable and register select). 

![Pic of data](https://github.com/gavinlyonsrepo/pic_16F18446_projects/blob/master/images/LM35data.jpg)

![PCF8574 & LCD ](https://github.com/gavinlyonsrepo/pic_16F1619_projects/blob/master/images/LCDPCF.jpg)

Schematic
------------------------

![schematic](https://github.com/gavinlyonsrepo/pic_16F18446_projects/blob/master/images/LM35.png)
